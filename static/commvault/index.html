<html>

<head>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/style.css" rel="stylesheet">
  <link href="/component.css" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js" text="text/javascript"></script>
  <script src="/js/bootstrap.min.js" text="text/javascript"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script text="text/javascript">
    setInterval(function(){
      console.log("Reading Progress");
      jQuery.get('http://localhost:3000/progress.txt', function(data){
        if(data != $(".console").text()){
          $(".console").html(data);
          $('.console').animate({scrollTop: $('.console').get(0).scrollHeight});
        }else{
          console.log(data);
          console.log($(".console").text());
        }
      });
    }, 2000);
  </script>
</head>

<body>
  <br>
  <div class="container" id="app">
    <form action="/commvault" enctype="multipart/form-data" method="post">
      <div class="form-group" align="center">
        <h4 class="header-gradient">Upload Usage Reports Here</h4>
        <div class="box">
          <input @change="onFileChange" style="display: none" type="file" name="file-5[]" id="file-5" class="inputfile inputfile-4" data-multiple-caption="{count} files selected" multiple="">
          <label for="file-5" v-if="!files.length">
            <figure><svg xmlns="http://www.w3.org/2000/svg" width="20" height="17" viewBox="0 0 20 17">
                <path d="M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z"></path>
              </svg></figure> <span>Choose a fileâ€¦</span>
          </label>

        </div>
        <h3 v-for="file in files">{{file.name}}</h3>
      </div>
      <div class="form-group" v-if="files.length">
        <input class="form-control div-gradient" type="submit" value="Upload" style="height: 25%">
      </div>
    </form>
    <div class="console"></div>
  </div>
</body>

</html>

<script>
  var app = new Vue({
    el: '#app',
    data: {
      files: []
    },
    methods: {
      onFileChange(e) {
        var files = e.target.files || e.dataTransfer.files;
        if (!files.length) return;
        this.files = files;
      }
    }
  })
</script>